{{define "content"}}
<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title mb-3">Configure repository</h5>

    {{if .Error}}
      <div class="alert alert-danger">{{.Error}}</div>
    {{end}}

    <form method="post" action="/config">
      <div class="mb-3">
        <label class="form-label">ID</label>
        <input class="form-control" name="id" value="{{.ID}}" readonly>
        <div class="form-text">Repository identifier (e.g. SRV002).</div>
      </div>

      <div class="mb-3">
        <label class="form-label">Path</label>
        <input class="form-control" name="path" value="{{.Path}}" readonly>
        <div class="form-text">Absolute path inside the container (must be under /repo).</div>
      </div>

      <div class="mb-3">
        <label class="form-label">Password</label>
        <input class="form-control" name="password" type="password" placeholder="Enter restic repository password" required>
        <div class="form-text">Stored in SQLite (Step 4). Later we can encrypt this.</div>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="no_lock" id="no_lock" {{if .NoLock}}checked{{end}}>
        <label class="form-check-label" for="no_lock">
          Use <code>--no-lock</code> (recommended for read-only browsing / parallel backups)
        </label>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">Save</button>
        <a class="btn btn-outline-secondary" href="/files">Cancel</a>
      </div>
    </form>
  </div>
</div>
{{end}}

{{template "layout" .}}
